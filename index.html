<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' https://fonts.googleapis.com; font-src https://fonts.gstatic.com"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heartbeater</title>

    <!-- External Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Styles - Theme & Design Tokens -->
    <link rel="stylesheet" href="styles/theme.css" />

    <!-- Styles - Global Layout -->
    <link rel="stylesheet" href="styles/layout.css" />

    <!-- Styles - Components -->
    <link rel="stylesheet" href="styles/components/buttons.css" />
    <link rel="stylesheet" href="styles/components/cards.css" />
    <link rel="stylesheet" href="styles/components/tables.css" />
    <link rel="stylesheet" href="styles/components/badges.css" />
    <link rel="stylesheet" href="styles/components/modals.css" />

    <!-- Styles - Features -->
    <link rel="stylesheet" href="styles/features/tabs.css" />
    <link rel="stylesheet" href="styles/features/forms.css" />
    <link rel="stylesheet" href="styles/features/scanner.css" />
  </head>
  <body>
    <header class="app-bar">
      <span class="material-icons">monitor_heart</span>
      <h1>Heartbeater</h1>
    </header>

    <nav class="tabs">
      <div class="tab active" data-tab="device-scan">
        <span
          class="material-icons"
          style="font-size: 18px; vertical-align: middle; margin-right: 8px"
          >radar</span
        >
        Device Scan
      </div>
      <div class="tab" data-tab="device-group">
        <span
          class="material-icons"
          style="font-size: 18px; vertical-align: middle; margin-right: 8px"
          >group</span
        >
        Device Groups
      </div>
    </nav>

    <main class="container">
      <!-- Device Scan Tab -->
      <div id="device-scan" class="tab-content active">
        <div class="card">
          <h2 class="card-title">Network Scanner</h2>
          <p class="card-subtitle">Discover all devices connected to your local network</p>

          <button id="scanBtn" class="md-button">
            <span class="material-icons">radar</span>
            Scan Network
          </button>

          <div id="status"></div>
        </div>

        <div id="results"></div>
      </div>

      <!-- Device Group Tab -->
      <div id="device-group" class="tab-content">
        <div class="card">
          <h2 class="card-title">Device Groups</h2>
          <p class="card-subtitle">Organize and manage device groups</p>
          <button id="addDeviceManuallyBtn" class="add-device-manually-btn">
            <span class="material-icons" style="font-size: 20px">add</span>
            Add Device Manually
          </button>
        </div>

        <div id="groups-container"></div>
      </div>
    </main>

    <!-- Add to Group Modal -->
    <div id="addToGroupModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">Add Device to Group</div>
        <div class="modal-body">
          <div class="group-list" id="groupList"></div>
          <div
            style="
              border-top: 1px solid var(--md-sys-color-outline);
              padding-top: 16px;
              margin-top: 16px;
            "
          >
            <details>
              <summary
                style="cursor: pointer; color: var(--md-sys-color-primary); font-weight: 500"
              >
                Create new group
              </summary>
              <div style="margin-top: 16px">
                <div class="form-group">
                  <label class="form-label">Group Name</label>
                  <input
                    type="text"
                    id="newGroupName"
                    class="form-input"
                    placeholder="Enter group name"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Description (optional)</label>
                  <input
                    type="text"
                    id="newGroupDescription"
                    class="form-input"
                    placeholder="Enter description"
                  />
                </div>
                <button
                  id="createNewGroupBtn"
                  class="modal-button modal-button-primary"
                  style="width: 100%"
                >
                  Create Group
                </button>
              </div>
            </details>
          </div>
        </div>
        <div class="modal-footer">
          <button id="addToGroupCancel" class="modal-button modal-button-secondary">Cancel</button>
          <button id="addToGroupConfirm" class="modal-button modal-button-primary">Save</button>
        </div>
      </div>
    </div>

    <!-- Add Device Manually Modal -->
    <div id="addDeviceManuallyModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">Add Device Manually</div>
        <div class="modal-body">
          <div class="form-group" style="display: flex; align-items: center; gap: 12px">
            <label class="form-label" style="flex: 0 0 120px; margin: 0">Device Name *</label>
            <input
              type="text"
              id="manualDeviceName"
              class="form-input"
              placeholder="e.g., My Device"
              style="flex: 1"
            />
          </div>

          <div class="form-group" style="display: flex; align-items: center; gap: 12px">
            <label class="form-label" style="flex: 0 0 120px; margin: 0">IP Address *</label>
            <input
              type="text"
              id="manualDeviceIp"
              class="form-input"
              placeholder="e.g., 192.168.1.100"
              style="flex: 1"
            />
          </div>

          <div class="form-group" style="display: flex; align-items: center; gap: 12px">
            <label class="form-label" style="flex: 0 0 120px; margin: 0">MAC Address</label>
            <input
              type="text"
              id="manualDeviceMac"
              class="form-input"
              placeholder="e.g., 00:11:22:33:44:55"
              style="flex: 1"
            />
          </div>

          <div class="form-group" style="display: flex; align-items: center; gap: 12px">
            <label class="form-label" style="flex: 0 0 120px; margin: 0">Manufacturer</label>
            <input
              type="text"
              id="manualDeviceManufacturer"
              class="form-input"
              placeholder="e.g., Apple Inc."
              style="flex: 1"
            />
          </div>

          <div class="form-group" style="display: flex; align-items: center; gap: 12px">
            <label class="form-label" style="flex: 0 0 120px; margin: 0">Friendly Name</label>
            <input
              type="text"
              id="manualDeviceFriendlyName"
              class="form-input"
              placeholder="e.g., Living Room TV"
              style="flex: 1"
            />
          </div>

          <div class="form-group" style="display: flex; flex-direction: column; gap: 12px">
            <label class="form-label" style="margin: 0">Select Groups *</label>
            <div class="group-list" id="manualDeviceGroupList"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="addDeviceManuallyCancel" class="modal-button modal-button-secondary">
            Cancel
          </button>
          <button id="addDeviceManuallyConfirm" class="modal-button modal-button-primary">
            Save Device
          </button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
